CREATE TABLE [dbo].[Managers] (
    [Id] [int] NOT NULL IDENTITY,
    [AccountName] [nvarchar](max) NOT NULL,
    [ApplicationUserId] [nvarchar](128),
    CONSTRAINT [PK_dbo.Managers] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ApplicationUserId] ON [dbo].[Managers]([ApplicationUserId])
CREATE TABLE [dbo].[Users] (
    [UserId] [nvarchar](128) NOT NULL,
    [FirstName] [nvarchar](max) NOT NULL,
    [LastName] [nvarchar](max) NOT NULL,
    [Email] [nvarchar](256),
    [EmailConfirmed] [bit] NOT NULL,
    [PasswordHash] [nvarchar](max),
    [SecurityStamp] [nvarchar](max),
    [PhoneNumber] [nvarchar](max),
    [PhoneNumberConfirmed] [bit] NOT NULL,
    [TwoFactorEnabled] [bit] NOT NULL,
    [LockoutEndDateUtc] [datetime],
    [LockoutEnabled] [bit] NOT NULL,
    [AccessFailedCount] [int] NOT NULL,
    [UserName] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([UserId])
)
CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[Users]([UserName])
CREATE TABLE [dbo].[UserClaims] (
    [UserClaimId] [int] NOT NULL IDENTITY,
    [UserId] [nvarchar](128) NOT NULL,
    [ClaimType] [nvarchar](max),
    [ClaimValue] [nvarchar](max),
    CONSTRAINT [PK_dbo.UserClaims] PRIMARY KEY ([UserClaimId])
)
CREATE INDEX [IX_UserId] ON [dbo].[UserClaims]([UserId])
CREATE TABLE [dbo].[UserLogins] (
    [LoginProvider] [nvarchar](128) NOT NULL,
    [ProviderKey] [nvarchar](128) NOT NULL,
    [UserId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.UserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
)
CREATE INDEX [IX_UserId] ON [dbo].[UserLogins]([UserId])
CREATE TABLE [dbo].[UserRoles] (
    [UserId] [nvarchar](128) NOT NULL,
    [RoleId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.UserRoles] PRIMARY KEY ([UserId], [RoleId])
)
CREATE INDEX [IX_UserId] ON [dbo].[UserRoles]([UserId])
CREATE INDEX [IX_RoleId] ON [dbo].[UserRoles]([RoleId])
CREATE TABLE [dbo].[Services] (
    [Id] [int] NOT NULL IDENTITY,
    [PlanId] [int] NOT NULL,
    [Name] [nvarchar](max) NOT NULL,
    [Amount] [decimal](18, 2) NOT NULL,
    [Interval] [nvarchar](max) NOT NULL,
    [Plan_token] [nvarchar](max) NOT NULL,
    [ManagerId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Services] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ManagerId] ON [dbo].[Services]([ManagerId])
CREATE TABLE [dbo].[Subs] (
    [Id] [int] NOT NULL IDENTITY,
    [TxId] [nvarchar](max),
    [ServiceId] [int] NOT NULL,
    [VendorId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Subs] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ServiceId] ON [dbo].[Subs]([ServiceId])
CREATE INDEX [IX_VendorId] ON [dbo].[Subs]([VendorId])
CREATE TABLE [dbo].[Vendors] (
    [Id] [int] NOT NULL IDENTITY,
    [ApplicationUserId] [nvarchar](128),
    [ManagerId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Vendors] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_ApplicationUserId] ON [dbo].[Vendors]([ApplicationUserId])
CREATE INDEX [IX_ManagerId] ON [dbo].[Vendors]([ManagerId])
CREATE TABLE [dbo].[Roles] (
    [RoleId] [nvarchar](128) NOT NULL,
    [Name] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.Roles] PRIMARY KEY ([RoleId])
)
CREATE UNIQUE INDEX [RoleNameIndex] ON [dbo].[Roles]([Name])
CREATE TABLE [dbo].[VendorService] (
    [VendorId] [int] NOT NULL,
    [ServiceId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.VendorService] PRIMARY KEY ([VendorId], [ServiceId])
)
CREATE INDEX [IX_VendorId] ON [dbo].[VendorService]([VendorId])
CREATE INDEX [IX_ServiceId] ON [dbo].[VendorService]([ServiceId])
ALTER TABLE [dbo].[Managers] ADD CONSTRAINT [FK_dbo.Managers_dbo.Users_ApplicationUserId] FOREIGN KEY ([ApplicationUserId]) REFERENCES [dbo].[Users] ([UserId])
ALTER TABLE [dbo].[UserClaims] ADD CONSTRAINT [FK_dbo.UserClaims_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[UserLogins] ADD CONSTRAINT [FK_dbo.UserLogins_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[UserRoles] ADD CONSTRAINT [FK_dbo.UserRoles_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[UserRoles] ADD CONSTRAINT [FK_dbo.UserRoles_dbo.Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[Roles] ([RoleId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Services] ADD CONSTRAINT [FK_dbo.Services_dbo.Managers_ManagerId] FOREIGN KEY ([ManagerId]) REFERENCES [dbo].[Managers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Subs] ADD CONSTRAINT [FK_dbo.Subs_dbo.Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [dbo].[Services] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Subs] ADD CONSTRAINT [FK_dbo.Subs_dbo.Vendors_VendorId] FOREIGN KEY ([VendorId]) REFERENCES [dbo].[Vendors] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Vendors] ADD CONSTRAINT [FK_dbo.Vendors_dbo.Users_ApplicationUserId] FOREIGN KEY ([ApplicationUserId]) REFERENCES [dbo].[Users] ([UserId])
ALTER TABLE [dbo].[Vendors] ADD CONSTRAINT [FK_dbo.Vendors_dbo.Managers_ManagerId] FOREIGN KEY ([ManagerId]) REFERENCES [dbo].[Managers] ([Id])
ALTER TABLE [dbo].[VendorService] ADD CONSTRAINT [FK_dbo.VendorService_dbo.Vendors_VendorId] FOREIGN KEY ([VendorId]) REFERENCES [dbo].[Vendors] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[VendorService] ADD CONSTRAINT [FK_dbo.VendorService_dbo.Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [dbo].[Services] ([Id]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201807301658248_initial', N'flutterwave_sub.Migrations.Configuration',  0x1F8B0800000000000400ED5D596FE4B8117E0F90FF20F4531278DD3EB28BCDA0BD8B597B9C1899C398F62CF266D012DD16564747527B6D04F96579C84FCA5F08A9935789A4CEEEC1C22F6E91AC2A168B45B28AFAF4BFFFFC77F5E34B1838CF3849FD38BA589C1E9F2C1C1CB9B1E7479B8BC52E7BFCE6FBC58F3FFCFE77AB775EF8E2FC5CD53BA7F548CB28BD583C65D9F6CD7299BA4F3844E971E8BB499CC68FD9B11B874BE4C5CBB39393BF2C4F4F97989058105A8EB3FABC8B323FC4F90FF2F3328E5CBCCD7628F8107B3848CBE7A4649D53753EA210A75BE4E28BC563B0CB329CFC8A9EF17DBA7B382E5A2C9CB7818F88346B1C3C2E1C144571863222EB9B2F295E67491C6DD65BF2000577AF5B4CEA3DA220C5651FDE34D54DBB737246BBB36C1A56A4DC5D9AC5A125C1D3F3523F4BB179272D2F6AFD110DBE239ACE5E69AF732D5E2C3EA0086D70B270445E6F2E8384D683747C5CB63C7284F2A3DA3088FDD0BF23E7721764BB045F447897252838726E770F81EFFE1DBFDEC5BFE0E822DA05012B26119494710FC8A3DB24DEE2247BFD8C1F4BE16FBC85B3E4DB2DC5867533A64DD1AF9B283B3F5B381F0973F410E0DA0A181DACB338C17FC5114E5086BD5B44FB19511A38D7A3C45DE0F5D6756362DBF447C594581F994C0BE7037A798FA34DF64487E065E15CFB2FD8AB9E94827C897C32F748A32CD96185A01AE6DB2DD171DE0F62F549D36F8508A767DF1B892070FC889EFD4DCEA19DF7C2F98C83FC57FAE46F8B6959D9CFBD54F73A89C3CF71D018A758E57E1DEF1297AA346EAF7787920DCECCC55EE3E4D97771AA94B72CBCAF674C23A75054F3ADE413CB2BF94DE5FA19475E9CA8C5AA68D67564F59545A0DAAA7295BA56CBC665B43A126918AD1D8A40E1701D4B8F096639C7AFFD249DC9BDBC4773717E17223F68617BF6ED775D9C998A0BD98A3CFA4988EBA1FD2926330745D632DFA234FD354EBCBFA1F469008DB5335B63779790D9B9CE50B81D9DDBED531CE18FBBF0814EFAE9780D363477BFC6D7C8250BFDBB88B6EA4DEF7DECFE12EFB277917745360D5F32B722487FDEF9A1398141C4217B109CA6D7C498B177497723BAED4F3B39EA9935D3DE74FEE93883CBE16580FC50BD1A8A3B80AA6AB328AA6B486B2350CD7647F13EDEF89199A8555558D4A28656D4B29AADA8949899A4654D58D0BC8256CEA256AF4D47B511A7F4F2116ADB767CA84F496FD3ED479C1D57AD8F0BBAD709A1499CF42FC712D923C7B871B34B3933DDA59C9F3E3C9E7FFFED77C83BFFEECFF8FCDBAFF12834D811C4D25FE5C347998EBE36E59C7E46C16E68569D6643EE04869F0D39D9FD9F0DB998E4F1B3EFD15DC952DFA2AA4CC81BD5AFECD976CE09924D3D1DB86E4ECD7C1A1FD069BAD0B568F8D942A9EEFF64519BB2B22AED5017AB9FCBFB57F2EE89C59571A00EB191B2E5E1C644C6DF61DC0628D2F36BA73153A43664CF6557D8F543142C9CDB84FC5766628895AE5D4429DA778AA882580F6A0B998CD4313A24F719B5BAE97997C14D6B8B00CF4775DCB75F6C583C1541B163E398F5EE0188579382FBDAE3300231CFE548355B386498BA28AB4873A747A14892492C578965EE827375D9FB5FD2EC37E70BF3BA7B695D66878A6BE616D0D7C917F6349C63A8E758D74928B904D50CB59B84B03055B9204B35C954A29465BD2235155BEB995734FC6DEEC1BC2648F48EBDB69AE48B4B2B6C4917AB6B48360D54B39D686DFB018BA4ACB8DA4149DB4172D816AB30A0356995EE75F41EFED87D1847EE43C92FCF9DE9A113536DC9EC78DF97D51A63964B257B5654B131E9B7691ABB7E2E95DA8755A927BEA7EF22CF31CB43153A57A45FC808100BF5E933221719FA85686F9FA22B1CE00C3B6FDDE2D2D9254A5DE4C97A277DF32CE5ABDD55239F2209C34BF8278931990938A1AD104DB1A7649EF951264F1B3F72FD2D0A8C3426B4369C765409351FB1E40A6F89D323621AA9C4440030D4B6AC790923A4D3D46AC958A29D81960947530310B38FFB66A042DA1330D0322F328981F21A9BC14079951C9C81167966D3F11792CEFB669E7CB61BB0CE623F34897172EA9AC136397DECBD69429755A1D1D7DE5C6DC6BF3E47E8865D4F5D615D1AE33F393E3E1DC6BE34324D60611A9D9B48A0384ACF626E623C19320430B8DC18401D7C32372FF03AB3D66807F5A59DCC10907D02F303C6C28433134F99C7DCD828256815CA902563687964DDC2CA947908ADE1EE818929049FC2BE14FA3761CB44CD67312E206E0799852E88D7184815523637394DE46F8E65B35DA409CCAA5DDF87B4688AC14D8D15C891CE014C4B4E62DAAEC4B66EBB14B5D5CB8AC99D9E4E5BC80769F5B6272E9B177B2A8FCDEBDE846B939F9CF5A853E52E748710E9ED32835DA2FE6823A547EC2767AF638CD0AB098F2F42CF0F61FFA808C643E3DB1699976322AA78C848F19A967CC0F4C11A584B131822AC0913E6EA2BA2A318629199216D32D20227F276E4EA8116E2974C9163241D2BD38C6999A6122D83125FE38C9F6364B56C1242A29B93BC1A4FA24C5349EDA5CDA6868E947051115564652CC8562F23B5922D63E91664CB37875AA916D34A43B4C9604BB4EA6D968E44BEF5919BE78F0DDA9E2A1A574B93A6B94E0D4A153093A0A104BDEFC6546E7F334E9CA5C609CABA4FB55D4B33DE3899C8D052D9B6E8C5794D74D05265DD7A2DA97264AD3D13B264BDB42464B4002D559D195C4BA595EA95A4C8D358646A7AA988CFAA001A2A3BD25B41206285AC22A37C8155C680E95BB314B5684A9723D0A9BD837EA45BD0B25E5A03DB46A16D46EE661168D10314CC36D067171570F73D15FD0723ADFA582BDB73C522A50FAE1AA8AE4397A17B7972E74D228136B1404121D2B1D226F637C274902EDB811A5187AC8C82565D742005A9C6310CEEBA31301554D12B6DFCCA7A2208012B9DCE7A2C0DF5854F784950C6558C222B5D970031963242FF55D7F16415E8E204A69102A603CAB5DDF4603FD07EA1BA23589F44EBB2D5B280AC2B1FAC9600B6DDEA03DA6EFD68C360DD954F9C75017477F9CDDA1EFD2D2C682C5D4ECFE2B9B9E694C509B117A194B02692E640435728430F88DEDFBCF442A99AF2DC0D9C832A96C2D15A1EC4EA805435A0FF178DDA51E914A18A92C435E96348831DF9AD7B794AC92D1D0A3C880294282EE45EC6C12E8CE0B00BDC9AC38663C9700516F4E42C0C47559FA4A1F62928498AE148232205D8F811361A7FC813580FBE66676160045A0AA6C6002B19A2C06079B18498C7E6B41A702E9654F3D49C5209B6C592291F59D260F09A24624C9939551E528BA5C99798531470B35892429185942C3A1627245BD0891EA051750D730E321E164B5D2EB5B04A19198B334FB9B8036D85CC6299959316C1B304572D169BD36E90B444BF01CDD199DCB322243780AF96E3D3F6DEDA80868DBFCE49D8396DD5526BEFFA1990229610F3D89256094324112B9FEFA56981A1D65EA655E428FA9916400376451CC40FEF895A7189609A1C6E0FE7EDDB708B607A7676BB07D601C5987B19479E67E9671B6A12E3BA8B2AC5CA5281D2AEB30D5E4B4CCB7ACC8080A9C150812DC739D4551834DC0C2D9F9953917705D687C150B159096D77280D700CA791FAA99D5E2A20185137D573736ACC75179658CB2D98F966018D4F0E310314744CCC5FD96C1CDB2F2040B8B3C28B1D05E6A6327FF6022F30C3B49A4B742C29F86ADDAC16225F69EA6022EA50BA8191400D478A7B0D10A7FA0A1CC3E0FB999E7B19BB7D8CF9EEA3FF1A37F600F1617D7E94A4149EE12C645AA8675B4B0A58E9C8A4C49FAC26A3816ABB5BCCF0B6170BBC21682456EB3B2A905C6246461E5D29312356A96DAB4ED0088998559914D17F8948CA921455288C5F714223BD7C4D331C1ED30AC7EB7F0697818FE986ACAA40DC94FF88D3AC8019599C9D9C9E091F32DA9F8F0A2DD3D40B14492506E305FEB2D04DE4E1978BC5BF9C7F4F8F9DE2538D6B0197EC31F6C5EFFC44CF28719F50F28710BDFC71B86FF75464DBB44A49BC716EFE21DE75B8F18E9C4F0931B437CE0951BD041FD3C8D80383BAFD35AF1E78B4B620B38DA6E07E76FBC64ABFA115BF9BD28F1AF72D146597738C9EB6A105884ADFD778F0B3413E7B0276B8F3A74D7A51547CBE64287A83A810FA3C49175AE0A7493CF233CB3F4D62D759F5A74ABA88067EA62477D83D3F5262EE35AB96F9E323E726FD12F9FFDC91823BA20DC1690A336B2828724522C3DC6F02290C33E759371E71A9ECB19CD9AD61DDBE0ED16BEACB5F80B02037E8571EFAEDB00EECEB0983ADF4B7F2C71106A33DA7DD0FF945847E9605BE1F6EFA1E59F75DE03C0E86FF0081953445D329865D198C38D8C318FF1D802EDB8701CF711CB2BF3736B27F3F6165B4FE7EF42494E07C2C0C2CBF6EC81BFF40C62EA5440ED6D259D0F59EA72A0158DD74A4EA86162325B31701D94DB957EDC6301310AFFCEB0B5EED5BACE9503C099C3A31B385AE3B1C684FD173ABD2EDC04C8599E1C0DC924531537E4B22C402424B3F5813FAB699FDFA5448D97B80EDAAC056981F0FBB2788AA353C48DBC55D1BC67B8F7CBD670657C67CE6C7B79EC3E0A0EBBC7B6E705648D67B666F45206876C0EA39AC0DB853B367C6668B4DDDC3DC94B897D20BC7DDE0AD0FC948E0B74C6576FB028FD90ABDD16D1047F23E357E461718EB3EA87F13C2441F04AE9F192EB4F9688D652F39088435AA691F7CF1A9E043BF4684E7F1D69F2A68371558E84CAB0F78D37B7F171F935BAC5D0672248FC287976431C65D8D2CC677104BB2F1693383139B5C3BDEABB5695E4B9A70B5B237A5B9972D13F8F4B91DD1945B9BE9DC8EF1CEE6B0A0D0FB629F4FBD7D99F0D463615B731F7A3A8299EF0B7EF99C213BCDBB68A629D0F1E375B38394CB986AE2B8962F8CF193A20D7CBC78DFE862E13DC464EC8B341D886C2AD297CE5D121FA9868A9F1A3A5364A6489049EC14752086004C741BD7324BD2CAB5AC0371056097DBB81633AF95695105E2A906261459D65B4A89535DA262D0BCB2A8A3DF069CAEA46C02A95EAD7412DDAA4045B986DB341C05CD08C0DA37D3BCB0A507BAD23A0A421581E1CC18F01C62A6E6AB05E0E2C4CD7800C6495AF8F618F27D10A5700E0900201A5E296321BC0FA21276AEAA6177FA2B645444F7A19422ACFD1C58697F158869A15EA0ED16A2AAE3344C3BC807CE07CA6E2EA4E20CCF3652AD877B05BC3E94E9F28B3A8B363258F7C590B21E651D8050E822765BA84F6A3C9C414338EEFAAEAB611A0630F2E93A3F08AC7CB7111E6B268F811E6FED83C79CAB23C3C32BB709AA2DC2249B0D0B3878195D64B5FCBC8BE8ABD8C5AF2B9CFA9B86C48AD08CB0CBC518EA3A37D1635C853A0489AA2AE2BD7A9C210F65E86D92F98FC8CD48317D0BDB8F360B277F8F9562013C60EF26FAB4CBB6BB8C7419870F01F78E270D99B4F1CF31EF7999579FB6F4573A441788983E7D7BFD53F4D3CE0FBC5AEE6BC5056580048DC594EF53D0B1CCE87B159BD79AD2C738322454AAAF0E21DDE1701B1062E9A7688D9E7117D988F9BDC71BE4BE362FBD4244F403C1AB7D75E5A34D82C2B4A4D1B4273F890D7BE1CB0FFF0765E2982014B00000 , N'6.2.0-61023')

